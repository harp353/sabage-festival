<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>学園祭サバゲー｜動画再生</title>
  <style>
    :root{ --bg:#000000; --card:#111111; --accent:#48c78e; --text:#ffffff; }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Noto Sans JP",sans-serif;background:var(--bg);color:var(--text)}
    header{padding:12px 16px;background:#000;border-bottom:1px solid #333;position:sticky;top:0;z-index:10}
    header h1{font-size:18px;margin:0}
    .tiny{font-size:12px;opacity:.8}

    /* ====== 入室ゲート ====== */
    .gate{position:fixed;inset:0;display:grid;place-items:center;background:#000;z-index:20}
    .gate-card{background:#111;border:1px solid #333;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.6);padding:40px 32px;max-width:90vw;width:90vw;text-align:center}
    .gate-title{font-size:clamp(48px,6vw,72px);font-weight:900;margin:0 0 24px;white-space:nowrap}
    .gate-btn{border:1px solid var(--accent);background:#222;color:#fff;font-weight:800;border-radius:12px;padding:16px 20px;cursor:pointer;width:220px;font-size:18px;margin:16px auto;display:block}
    .gate-btn:hover{background:#333}
    body.gate-active .wrap{display:none}

    .gate-list{color:#ccc;font-size:14px;text-align:left;max-width:520px;margin:0 auto 20px;padding-left:20px}
    .gate-list li{margin-bottom:6px}

    /* ====== メインUI ====== */
    .wrap{display:grid;gap:16px;padding:16px}
    .panel{background:var(--card);border:1px solid #333;border-radius:16px}
    body:not(.played) .screen{display:none}
    body.played .screen{display:flex}
    .screen{border:1px solid #333;border-radius:16px;overflow:hidden}
    .stage{width:100%;height:100%;background:#000;min-height:80vh;display:flex;align-items:center;justify-content:center}
    .player-embed{width:100%;height:100%;border:0;background:#000}
  </style>
</head>
<body class="gate-active">
  <header>
    <h1>学園祭サバゲー</h1>
    <div class="tiny">確認 → ルール説明 → 諸注意 → 動画再生（1本表示）</div>
  </header>

  <!-- 入室ゲート -->
  <div class="gate" id="gate">
    <div class="gate-card" id="step1">
      <p class="gate-title">ここは4階Aグループ</p>
      <button class="gate-btn" id="btn-confirm">確認</button>
    </div>
    <div class="gate-card" id="step2" style="display:none;">
      <h2>ルール説明</h2>
      <ul class="gate-list">
        <li>制限時間は5分です。</li>
        <li>ヒットされたら手を挙げて退場してください。</li>
        <li>弾はセーフティで補充してください。</li>
      </ul>
      <button class="gate-btn" id="btn-rule-next">次へ</button>
    </div>
    <div class="gate-card" id="step3" style="display:none;">
      <h2>諸注意</h2>
      <ul class="gate-list">
        <li>走らないでください。</li>
        <li>銃口を人に向けないでください。</li>
        <li>動画の音量に注意してください。</li>
      </ul>
      <button class="gate-btn" id="btn-accept">同意して進む</button>
    </div>
  </div>

  <!-- 動画再生エリア（Google Drive preview 埋め込み） -->
  <main class="wrap">
    <section class="panel screen">
      <div class="stage" id="stage">
        <!-- ここだけ差し替え：/file/d/ID/preview をiframeで埋め込む -->
        <iframe
          class="player-embed"
          src="https://drive.google.com/file/d/1jy5tZeSYAmptpgg57RR4XfZ-IY-zm7yQ/preview"
          allow="autoplay; fullscreen"
          allowfullscreen
          referrerpolicy="no-referrer"
        ></iframe>
      </div>
    </section>
  </main>

  <script>
    const gate = document.getElementById('gate');
    const step1 = document.getElementById('step1');
    const step2 = document.getElementById('step2');
    const step3 = document.getElementById('step3');
    const btnConfirm = document.getElementById('btn-confirm');
    const btnRuleNext = document.getElementById('btn-rule-next');
    const btnAccept = document.getElementById('btn-accept');

    btnConfirm.addEventListener('click', ()=>{ step1.style.display='none'; step2.style.display='block'; });
    btnRuleNext.addEventListener('click', ()=>{ step2.style.display='none'; step3.style.display='block'; });
    btnAccept.addEventListener('click', ()=>{
      document.body.classList.remove('gate-active');
      gate.style.display='none';
      document.body.classList.add('played');
    });
  </script>
</body>
</html>

